// キャラクターシートの型定義

// 基本情報
export interface CharacterBasicInfo {
	name: string;
	occupation: string;
	age: number;
	gender: string;
	height: number;
	weight: number;
	birthplace: string;
	background: string;
	behavior: string;
}

// 能力値
export interface CharacterAbilities {
	// ダイスにより決定するもの
	strength: number; // 筋力 (3d6)
	constitution: number; // 体力 (3d6)
	power: number; // 精神力 (3d6)
	dexterity: number; // 機敏 (3d6)
	appearance: number; // 外見的な魅力 (3d6)
	size: number; // 体格 (2d6+6)
	intelligence: number; // 知性 (2d6+6)
	education: number; // 教養 (3d6+3)

	// 計算されるパラメータ
	san: number; // 正気度 (power * 5)
	fortune: number; // 幸運 (power * 5)
	idea: number; // アイデア (intelligence * 5)
	knowledge: number; // 知識 (education * 5)
	durability: number; // 耐久力 ((constitution + size) / 2)
	magic_point: number; // マジックポイント (power * 1)
	vocational_skill_points: number; // 職業技能ポイント (education * 20)
	hobby_skill_points: number; // 趣味技能ポイント (intelligence * 10)
	damage_bonus: number; // ダメージボーナス (strength + size)
}

// 技能
export interface CharacterSkills {
	// 戦闘技能
	combat: {
		dodge: number; // 回避 (DEX×2%)
		kick: number; // キック (25)
		grapple: number; // 組付き (25)
		punch: number; // こぶし(パンチ) (50)
		headbutt: number; // 頭突き (10)
		throw: number; // 投擲 (25)
		martialArts: number; // マーシャルアーツ (1)
		handgun: number; // 拳銃 (20)
		submachineGun: number; // サブマシンガン (15)
		shotgun: number; // ショットガン (30)
		machineGun: number; // マシンガン (15)
		rifle: number; // ライフル (25)
	};

	// 探索技能
	investigation: {
		firstAid: number; // 応急手当 (30)
		locksmith: number; // 鍵開け (1)
		hide: number; // 隠す (15)
		conceal: number; // 隠れる (10)
		listen: number; // 聞き耳 (25)
		sneak: number; // 忍び歩き (10)
		photography: number; // 写真術 (10)
		psychoanalysis: number; // 精神分析 (1)
		track: number; // 追跡 (10)
		climb: number; // 登攀 (40)
		library: number; // 図書館 (25)
		spot: number; // 目星 (25)
	};

	// 行動技能
	action: {
		drive: number; // 運転 (20)
		mechanicalRepair: number; // 機械修理 (20)
		operateHeavyMachinery: number; // 重機械操作 (1)
		ride: number; // 乗馬 (5)
		swim: number; // 水泳 (25)
		craft: number; // 製作 (5)
		pilot: number; // 操縦 (1)
		jump: number; // 跳躍 (25)
		electricalRepair: number; // 電気修理 (10)
		navigate: number; // ナビゲート (10)
		disguise: number; // 変装 (1)
	};

	// 交渉技能
	negotiation: {
		fastTalk: number; // 言いくるめ (5)
		credit: number; // 信用 (15)
		persuade: number; // 説得 (15)
		bargain: number; // 値切り (5)
		nativeLanguage: number; // 母国語 (EDU×5%)
		otherLanguage: number; // 他の言語 (1%)
	};

	// 知識技能
	knowledge: {
		medicine: number; // 医学 (5)
		occult: number; // オカルト (5)
		chemistry: number; // 化学 (1)
		cthulhuMythos: number; // クトゥルフ神話 (0)
		art: number; // 芸術 (5)
		accounting: number; // 経理 (10)
		archaeology: number; // 考古学 (1)
		computer: number; // コンピュータ (1)
		psychology: number; // 心理学 (5)
		anthropology: number; // 人類学 (1)
		biology: number; // 生物学 (1)
		geology: number; // 地質学 (1)
		electronics: number; // 電子工学 (1)
		astronomy: number; // 天文学 (1)
		naturalHistory: number; // 博物学 (10)
		physics: number; // 物理学 (1)
		law: number; // 法律 (5)
		pharmacy: number; // 薬学 (1)
		history: number; // 歴史 (20)
	};

	// 技能ポイントの情報
	skillsUsed?: string[]; // 使用した技能
	totalPointsUsed?: number; // 使用した技能ポイントの合計
}

// キャラクターシート全体
export interface CharacterSheet {
	id: string;
	basicInfo: CharacterBasicInfo;
	abilities: CharacterAbilities;
	skills: CharacterSkills;
	createdAt: Date;
	updatedAt: Date;
}

// フォームのステップ
export enum CharacterSheetStep {
	BASIC_INFO = 0,
	ABILITIES = 1,
	SKILLS = 2,
	RESULT = 3,
}

// 職業リスト
export const OCCUPATION_GROUPS = [
	{
		label: "医師",
		options: [
			"医師",
			"アニマルセラピスト",
			"看護師",
			"救急救命士",
			"形成外科医",
			"精神科医",
			"闇医者",
		],
	},
	{
		// labelなし (単独項目)
		options: ["エンジニア"],
	},
	{
		// labelなし (単独項目)
		options: ["狂信者"],
	},
	{
		label: "警察官",
		options: [
			"警察官",
			"海上保安官",
			"科学捜査研究員",
			"山岳救助隊員",
			"消防士",
		],
	},
	{
		label: "芸術家",
		options: [
			"芸術家",
			"芸術家（基本）",
			"ダンサー",
			"デザイナー",
			"ファッション系芸術家",
		],
	},
	{
		options: ["古物研究科"],
	},
	{
		options: ["コンピューター技術者"],
	},
	{
		options: ["作家"],
	},
	{
		label: "自衛官",
		options: [
			"自衛官",
			"陸上自衛隊員",
			"海上自衛隊員（艦上勤務）",
			"自衛隊パイロット（陸海空）",
			"民間軍事会社メンバー",
		],
	},
	{
		options: ["ジャーナリスト"],
	},
	{
		options: ["宗教家"],
	},
	{
		options: ["商店主／店員"],
	},
	{
		options: ["私立探偵"],
	},
	{
		options: ["水産業従事者"],
	},
	{
		options: ["スポーツ選手"],
	},
	{
		label: "大学教授",
		options: ["大学教授", "冒険家教授", "評論家"],
	},
	{
		label: "タレント",
		options: [
			"タレント",
			"アイドル、音楽タレント",
			"アナウンサー",
			"コメディアン",
			"スポーツタレント",
			"テレビ・コメンテーター",
			"俳優",
			"プロデューサー、マネージャー",
		],
	},
	{
		label: "超心理学者",
		options: [
			"超心理学者",
			"ゴーストハンター",
			"占い師、スピリチュアリスト、霊媒師",
		],
	},
	{
		options: ["ディレッタント"],
	},
	{
		options: ["ドライバー"],
	},
	{
		options: ["農林業従事者"],
	},
	{
		options: ["パイロット"],
	},
	{
		label: "ビジネスマン",
		options: ["ビジネスマン", "執事・メイド", "セールスマン"],
	},
	{
		options: ["法律家"],
	},
	{
		options: ["放浪者"],
	},
	{
		options: ["暴力団組員"],
	},
	{
		options: ["ミュージシャン"],
	},
	{
		options: ["メンタルセラピスト"],
	},
];

export const OCCUPATION_SKILLS_MAP: Record<string, string[]> = {
	医師: [
		"医学",
		"応急手当",
		"経理",
		"信用",
		"生物学",
		"説得",
		"薬学",
		"ほかの言語（英語、ラテン語、ドイツ語）",
	],
	アニマルセラピスト: [
		"聞き耳",
		"心理学",
		"精神分析",
		"生物学",
		"跳躍",
		"追跡",
		"博物学",
		"＋個人的な関心のある技能１つ",
	],
	看護師: [
		"化学",
		"生物学",
		"応急手当",
		"言いくるめ or 説得",
		"薬学",
		"心理学",
		"聞き耳",
		"目星",
	],
	救急救命士: [
		"医学",
		"応急手当",
		"化学",
		"鍵開け",
		"機械修理",
		"電気修理",
		"登攀",
	],
	形成外科医: [
		"医学",
		"応急手当",
		"経理",
		"心理学",
		"説得",
		"値切り",
		"薬学",
		"ほかの言語（英語）",
	],
	精神科医: [
		"医学",
		"化学",
		"心理学",
		"精神分析",
		"生物学",
		"説得",
		"薬学",
		"ほかの言語",
	],
	闇医者: [
		"医学",
		"応急手当",
		"経理",
		"説得",
		"法律",
		"薬学",
		"ほかの言語",
		"＋個人的な関心のある技能１つ",
	],
	エンジニア: [
		"機械修理",
		"コンピューター",
		"重機械操作",
		"電気修理",
		"図書館",
		"物理学",
		"ほかの言語（英語）",
		"＋次の技能から１つ選択：化学、地質学、電子工学",
	],
	狂信者: [
		"隠す",
		"隠れる",
		"心理学",
		"説得",
		"図書館",
		"ほかの言語（英語、中国語、朝鮮語、ロシア語など）",
		"＋次の技能から２つ選択：化学、電気修理、法律、薬学、ライフル、ショットガン、スタンガン",
	],
	警察官: [
		"言いくるめ",
		"聞き耳",
		"心理学",
		"説得",
		"追跡",
		"法律",
		"目星",
		"＋次の技能から１つ選択：運転（自動車、二輪車）、信用、組みつき、武道（柔道）、日本刀、拳銃、杖",
	],
	海上保安官: [
		"機械修理",
		"重機械操作",
		"信用",
		"操縦（船舶）",
		"登攀",
		"ナビゲート",
		"法律",
		"サバイバル（海）",
	],
	科学捜査研究員: [
		"医学",
		"化学",
		"コンピューター",
		"写真術",
		"人類学",
		"生物学",
		"法律",
		"薬学",
	],
	山岳救助隊員: [
		"応急手当",
		"聞き耳",
		"跳躍",
		"追跡",
		"登攀",
		"ナビゲート",
		"サバイバル（山）",
		"ほかの言語",
	],
	消防士: [
		"運転（自動車）",
		"応急手当",
		"回避",
		"機械修理",
		"重機械操作",
		"跳躍",
		"投擲",
		"登攀",
	],
	芸術家: [
		"言いくるめ",
		"芸術（任意）",
		"コンピューター",
		"写真術",
		"心理学",
		"製作（任意）",
		"目星",
		"歴史",
	],
	"芸術家（基本）": [
		"言いくるめ or 説得",
		"芸術（任意） or 製作（任意）",
		"心理学",
		"目星",
		"歴史 or 博物学",
		"＋次の技能から３つ選択：コンピューター、写真術、生物学、天文学、芸術（任意） or 製作（任意）",
	],
	ダンサー: [
		"回避",
		"芸術（ダンス）",
		"忍び歩き",
		"跳躍",
		"登攀",
		"目星",
		"＋個人的な関心のある技能２つ",
	],
	デザイナー: [
		"言いくるめ or 説得",
		"芸術（任意） or 製作（任意）",
		"コンピューター",
		"心理学",
		"図書館",
		"目星",
		"＋個人的な関心のある技能２つ",
	],
	ファッション系芸術家: [
		"言いくるめ or 説得",
		"芸術（任意） or 製作（任意）",
		"心理学",
		"値切り",
		"変装",
		"目星",
		"＋個人的な関心のある技能２つ",
	],
	古物研究科: [
		"芸術（任意）",
		"コンピューター",
		"製作（古書修復、古美術修復）",
		"図書館",
		"値切り",
		"ほかの言語（英語、漢文、ラテン語など）",
		"目星",
		"歴史",
	],
	コンピューター技術者: [
		"言いくるめ",
		"経理",
		"コンピューター",
		"電気修理",
		"電子工学",
		"図書館",
		"物理学",
		"ほかの言語（英語、その他）",
	],
	作家: [
		"オカルト",
		"芸術（トリビア知識、詩的表現など）",
		"心理学",
		"説得",
		"図書館",
		"ほかの言語（英語など）",
		"母国語",
		"歴史",
	],
	自衛官: [
		"運転（自動車）",
		"応急手当",
		"機械修理",
		"重機械操作",
		"操縦（船舶、潜水艦、戦車、民間プロペラ機、民間ジェット機、定期旅客機、ジェット戦闘機、ヘリコプター）",
		"ナビゲート",
		"＋次の技能から２つ選択：回避、隠れる、聞き耳、経理、忍び歩き、信用、説得、値切り、法律、ほかの言語（英語など）、こぶし/パンチ、キック、組みつき、武道（任意）、サブマシンガン、ライフル、グレネード・ランチャー、砲、拳銃",
	],
	陸上自衛隊員: [
		"応急手当",
		"回避",
		"隠れる",
		"サバイバル（山、砂漠）",
		"任意の近接戦技能",
		"任意の火器技能",
		"＋次の技能から２つ選択：機械修理、忍び歩き、水泳、登攀、ほかの言語、パラシュート、重機械操作、砲",
	],
	"海上自衛隊員（艦上勤務）": [
		"応急手当",
		"重機械操作",
		"水泳",
		"操縦（ボート）",
		"ナビゲート",
		"サバイバル（海）",
		"＋次の技能から２つ選択：機械修理、電気修理、任意の近接戦技能、任意の火器技能、砲",
	],
	"自衛隊パイロット（陸海空）": [
		"機械修理",
		"重機械操作",
		"操縦（戦闘機、大型機、ヘリコプターなど）",
		"電気修理",
		"天文学",
		"ナビゲート",
		"パラシュート",
		"＋個人的な関心のある技能１つ",
	],
	民間軍事会社メンバー: [
		"回避",
		"隠れる",
		"忍び歩き",
		"水泳 or 登攀",
		"任意の近接戦技能",
		"任意の火器技能",
		"＋次の技能から２つ選択：応急手当、機械修理、サバイバル（山、砂漠）、ほかの言語",
	],
	ジャーナリスト: [
		"言いくるめ",
		"写真術",
		"心理学",
		"説得",
		"図書館",
		"母国語",
		"ほかの言語（英語など）",
		"歴史",
	],
	宗教家: [
		"オカルト",
		"聞き耳",
		"経理",
		"心理学",
		"説得",
		"図書館",
		"歴史",
		"＋次の技能から１つ選択：言いくるめ、信用、ほかの言語（漢文、ラテン語など）",
	],
	"商店主／店員": [
		"言いくるめ",
		"聞き耳",
		"経理",
		"心理学",
		"信用",
		"値切り",
		"＋次の技能から１つ選択：運転（自動車、二輪車）、コンピューター",
		"＋商品知識から好きな技能を１つ",
	],
	私立探偵: [
		"言いくるめ",
		"鍵開け",
		"心理学",
		"追跡",
		"図書館",
		"法律",
		"目星",
		"＋次の技能から１つ選択：聞き耳、写真術、値切り、スタンガン",
	],
	水産業従事者: [
		"機械修理",
		"重機械操作",
		"水泳",
		"操縦（船舶）",
		"天文学",
		"ナビゲート",
		"博物学",
		"目星",
	],
	スポーツ選手: [
		"回避",
		"芸術（任意のスポーツ競技）",
		"跳躍",
		"投擲",
		"登攀",
		"＋次の技能から３つ選択：応急手当、乗馬、水泳、こぶし/パンチ、キック、組みつき、武道（任意）、日本刀、薙刀、杖、弓、競技用アーチェリー、拳銃、ライフル、ショットガン",
	],
	大学教授: [
		"信用",
		"心理学",
		"説得",
		"図書館",
		"値切り",
		"ほかの言語（英語など）",
		"＋次の技能から専門的研究分野として２つ選択：医学、化学、考古学、人類学、生物学、地質学、電子工学、天文学、博物学、物理学、法律、歴史",
	],
	冒険家教授: [
		"応急手当",
		"説得",
		"跳躍",
		"登攀",
		"図書館",
		"ほかの言語",
		"＋次の技能から専門的研究分野として２つ選択：考古学、地質学、歴史など",
	],
	評論家: [
		"信用",
		"心理学",
		"説得",
		"図書館",
		"値切り",
		"母国語",
		"＋次の技能から専門的研究分野として２つ選択：オカルト、博物学、歴史など",
	],
	タレント: [
		"言いくるめ",
		"聞き耳",
		"信用",
		"心理学",
		"説得",
		"芸術（何かの音楽演奏、歌唱、ダンス、演技、司会など）",
		"変装",
		"ほかの言語（英語）",
	],
	"アイドル、音楽タレント": [
		"言いくるめ",
		"芸術（歌唱）",
		"芸術（ダンス）",
		"心理学",
		"説得",
		"変装",
		"＋個人的な関心のある技能２つ",
	],
	アナウンサー: [
		"言いくるめ",
		"信用",
		"心理学",
		"説得",
		"芸術（アナウンス）",
		"図書館",
		"母国語",
		"＋個人的な関心のある技能１つ",
	],
	コメディアン: [
		"言いくるめ",
		"聞き耳",
		"心理学",
		"芸術（物語）",
		"芸術（演劇）",
		"変装",
		"＋個人的な関心のある技能２つ",
	],
	スポーツタレント: [
		"言いくるめ",
		"心理学",
		"芸術（演劇）",
		"跳躍 or 登攀",
		"変装",
		"任意の素手の近接戦技能",
		"＋個人的な関心のある技能２つ",
	],
	テレビ・コメンテーター: [
		"言いくるめ",
		"聞き耳",
		"信用",
		"心理学",
		"説得",
		"図書館",
		"値切り",
		"＋個人的な専門の技能１つ",
	],
	俳優: [
		"言いくるめ",
		"運転（自動車）",
		"芸術（演劇）",
		"心理学",
		"説得",
		"変装",
		"＋個人的な関心のある技能２つ",
	],
	"プロデューサー、マネージャー": [
		"言いくるめ",
		"運転（自動車）",
		"隠れる",
		"聞き耳",
		"忍び歩き",
		"値切り",
		"法律",
		"＋個人的な関心のある技能１つ",
	],
	超心理学者: [
		"オカルト",
		"人類学",
		"写真術",
		"心理学",
		"精神分析",
		"図書館",
		"ほかの言語（英語、ラテン語など）",
		"歴史",
	],
	ゴーストハンター: [
		"オカルト",
		"化学",
		"機械修理",
		"写真術",
		"生物学",
		"説得",
		"電気修理",
		"物理学",
	],
	"占い師、スピリチュアリスト、霊媒師": [
		"言いくるめ",
		"オカルト",
		"芸術（演劇）",
		"信用",
		"心理学",
		"説得",
		"値切り",
		"＋個人的な関心のある技能１つ",
	],
	ディレッタント: [
		"運転（自動車）",
		"芸術（音楽、美術、文学、ダンス、何かのスポーツ）",
		"信用",
		"図書館",
		"法律",
		"ほかの言語（英語など）",
		"＋次の技能から２つ選択：乗馬、写真術、操縦（航空機、船舶）、拳銃、ライフル、ショットガン、武道（任意）",
	],
	ドライバー: [
		"運転（自動車、二輪車）",
		"機械修理",
		"聞き耳",
		"重機械操作",
		"電気修理",
		"ナビゲート",
		"値切り",
		"目星",
	],
	農林業従事者: [
		"応急手当",
		"機械修理",
		"重機械操作",
		"製作（農作物、畜産、養蜂など）",
		"追跡",
		"電気修理",
		"博物学",
		"＋次の技能から１つ選択：杖、ライフル、ショットガン、チェーンソー",
	],
	パイロット: [
		"機械修理",
		"重機械操作",
		"電気修理",
		"操縦（民間プロペラ機、民間ジェット機、定期旅客機、ジェット戦闘機、ヘリコプター、飛行機）",
		"天文学",
		"ナビゲート",
		"物理学",
		"ほかの言語（英語、その他）",
	],
	ビジネスマン: [
		"言いくるめ",
		"経理",
		"コンピューター",
		"信用",
		"説得",
		"値切り",
		"法律",
		"ほかの言語（英語、その他ビジネス相手の国の言語）",
	],
	執事・メイド: [
		"言いくるめ or 説得",
		"応急手当",
		"聞き耳",
		"芸術 or 製作（ワインの鑑定、料理、裁縫、掃除など）",
		"経理",
		"心理学",
		"目星",
		"ほかの言語",
	],
	セールスマン: [
		"言いくるめ",
		"運転（自動車）",
		"芸術（演劇）",
		"経理",
		"心理学",
		"説得",
		"値切り",
		"＋個人的な関心のある技能１つ",
	],
	法律家: [
		"言いくるめ",
		"経理",
		"信用",
		"心理学",
		"説得",
		"図書館",
		"値切り",
		"法律",
	],
	放浪者: [
		"言いくるめ",
		"隠れる",
		"聞き耳",
		"忍び歩き",
		"心理学",
		"値切り",
		"目星",
		"＋次の技能から１つ選択：運転（自動車、二輪車）、芸術（ギャンブル）、ほかの言語（英語など）",
	],
	暴力団組員: [
		"言いくるめ",
		"隠す",
		"芸術（刺青彫り、イカサマ）",
		"心理学",
		"値切り",
		"目星",
		"＋次の技能から２つ選択：隠れる、こぶし/パンチ、キック、組みつき、武道（任意）、日本刀、ナイフ、拳銃",
	],
	ミュージシャン: [
		"言いくるめ",
		"聞き耳",
		"芸術（歌唱、何かの音楽演奏）",
		"製作（作詞、作曲）",
		"説得",
		"心理学",
		"値切り",
		"ほかの言語（英語など）",
	],
	メンタルセラピスト: [
		"言いくるめ",
		"芸術（絵画、音楽演奏、歌唱、アロマなど）",
		"信用",
		"心理学",
		"精神分析",
		"説得",
		"法律",
		"ほかの言語（英語、ドイツ語など）",
	],
};

// (オプション) すべての職業名をフラットなリストとして取得
export const ALL_OCCUPATIONS = OCCUPATION_GROUPS.flatMap(
	(group) => group.options,
);

// (オプション) すべての職業名のUnion型を定義
export type Occupation = (typeof ALL_OCCUPATIONS)[number];
